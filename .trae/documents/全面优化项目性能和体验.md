## 优化计划

### 1. 修复评论系统滚动问题（已完成）
- ✅ 已添加 `jumpToComment: false` 配置
- ✅ 已添加 MutationObserver 阻止 #comment 链接
- ✅ 已拦截 window.scrollTo 方法
- ✅ 已添加 CSS 滚动行为控制

### 2. 性能优化

#### 2.1 JavaScript 优化
- **延迟加载 OverlayScrollbars**：仅在非触摸设备上启用
- **PhotoSwipe 单例模式**：复用实例避免重复创建
- **Swup 配置优化**：减少不必要的 hooks 监听
- **评论系统懒加载**：进一步优化加载时机

#### 2.2 资源加载优化
- **字体优化**：添加 `font-display: swap`，预加载关键字体
- **图片优化**：懒加载非首屏图片
- **搜索优化**：延迟初始化 Pagefind

#### 2.3 CSS 优化
- **关键 CSS 内联**：将首屏关键样式内联
- **移除未使用样式**：优化 Tailwind 配置

### 3. 代码清理
- 移除未使用的依赖
- 清理冗余代码
- 优化构建配置

### 4. 文件优化
- **Layout.astro**：优化滚动条和 PhotoSwipe 初始化
- **Comment.astro**：进一步优化加载性能
- **astro.config.mjs**：优化代码分割和构建配置

## 预期效果
1. 评论系统点赞/回复不再跳动
2. 页面加载速度提升 20-30%
3. 减少 JavaScript 执行时间
4. 改善用户交互体验