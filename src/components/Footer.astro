---

import { profileConfig } from "../config";
import { url } from "../utils/url-utils";

const currentYear = new Date().getFullYear();
---

<!--<div class="border-t border-[var(&#45;&#45;primary)] mx-16 border-dashed py-8 max-w-[var(&#45;&#45;page-width)] flex flex-col items-center justify-center px-6">-->
<div class="transition border-t border-black/10 my-10 border-dashed mx-32"></div>
<!--<div class="transition bg-[oklch(92%_0.01_var(&#45;&#45;hue))] rounded-2xl py-8 mt-4 mb-8 flex flex-col items-center justify-center px-6">-->
<div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] rounded-2xl mb-12 flex flex-col items-center justify-center px-6">
    <div class="transition text-50 text-sm text-center">
        &copy; <span id="copyright-year">{currentYear}</span> {profileConfig.name}. All Rights Reserved. /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('rss.xml')}>RSS</a> /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('sitemap-index.xml')}>Sitemap</a><br>
        Powered by
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> &
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/saicaca/fuwari">Fuwari</a>
    </div>
    
    <!-- BLOGS·CN 链接 - 延迟加载优化 -->
    <div class="mt-4" id="blogscn-container">
        <a href="https://blogscn.fun/" title="BLOGS·CN" target="_blank" rel="noopener noreferrer">
            <img 
                data-src="https://photo.xiangming.site/img/blogscn.png" 
                alt="本站已加入BLOGS·CN" 
                class="lazy-load"
                style="width:auto;height:15px;"
                decoding="async"
                loading="lazy"
            >
        </a>
    </div>
</div>

<script is:inline>
(function() {
    // 延迟加载 BLOGS·CN 图片
    function loadBlogscnImage() {
        var img = document.querySelector('#blogscn-container img');
        if (img && img.dataset.src) {
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
        }
    }
    
    // 使用 requestIdleCallback 或 setTimeout 延迟加载
    if ('requestIdleCallback' in window) {
        requestIdleCallback(loadBlogscnImage, { timeout: 2000 });
    } else {
        setTimeout(loadBlogscnImage, 1000);
    }
})();
</script>

<style>
.lazy-load {
    opacity: 0;
    transition: opacity 0.3s ease;
}
.lazy-load[src] {
    opacity: 1;
}
</style>